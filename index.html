<!DOCTYPE html>
<html lang="en">
  <meta charset="UTF-8">
  <title>Breakout</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <style>
  canvas {
    border: 1px solid black;
  }
  </style>

  <body>
    <canvas id="rt" width="640" height="480"></canvas>
    <script>
    ;(() => {
      const w = 30;
      const h = 10;

      // player position,
      let x = 10;
      let y = 10;

      let up = false;
      let down = false;
      let right = false;
      let left = false;

      function keyDownHandler(event) {
        if (event.keyCode === 39) {
          right = true;
        } else if (event.keyCode === 37) {
          left = true;
        }

        if (event.keyCode === 40) {
          down = true;
        } else if (event.keyCode === 38) {
          up = true;
        }
      }

      function keyUpHandler(event) {
        if (event.keyCode === 39) {
          right = false;
        } else if (event.keyCode === 37) {
          left = false;
        }

        if (event.keyCode === 40) {
          down = false;
        } else if (event.keyCode === 38) {
          up = false;
        }
      }

      document.addEventListener("keydown", keyDownHandler, false);
      document.addEventListener("keyup", keyUpHandler, false);

      function main() {
        window.requestAnimationFrame(main);

        // update the x,y positions,
        if (up) {
          y -= 1;
        } else if (down) {
          y += 1;
        }

        if (left) {
          x -= 1;
        } else if (right) {
          x += 1;
        }


        const canvas = document.getElementById("rt");
        if (canvas.getContext) {
          const ctx = canvas.getContext("2d");

          // clear the canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          // draw the player
          ctx.fillStyle = "rgb(200 0 0)";
          ctx.fillRect(x, y, w, h);
        }

      }

      main();
    })();
    </script>
  </body>
</html>
